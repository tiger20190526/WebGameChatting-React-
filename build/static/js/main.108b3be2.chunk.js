(this["webpackJsonpreact-firebase-chat-app"]=this["webpackJsonpreact-firebase-chat-app"]||[]).push([[0],{91:function(n,e,t){"use strict";t.r(e);var r=t(3),o=t(0),c=t.n(o),a=t(13),i=t.n(a),u=t(19),s=t(8),d=t(18),l=t(27),f=t(14),b=t(10),j=t(25);function p(){var n=Object(b.a)(['\n  margin: 0;\n  font-family: "Sansita Swashed", cursive;\n  font-size: 24px;\n  text-decoration: none;\n  font-weight: bold;\n  color: ',";\n"]);return p=function(){return n},n}function h(){var n=Object(b.a)(["\n  display: flex;\n  padding: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]);return h=function(){return n},n}function x(){var n=Object(b.a)(["\n  background-color: ",";\n  border-bottom: 2px solid ",";\n"]);return x=function(){return n},n}var m=s.d.nav(x(),(function(n){return n.theme.color.thunder}),(function(n){return n.theme.color.midGray})),O=s.d.section(h()),g=Object(s.d)(j.b)(p(),(function(n){return n.theme.color.white})),v=t(37);t(60);function w(){var n=Object(b.a)(["\n      padding: 12px 22px;\n      color: ",";\n      border: none;\n      background-color: ",";\n      &:hover {\n        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n      }\n    "]);return w=function(){return n},n}function y(){var n=Object(b.a)(["\n      margin-top: 24px;\n    "]);return y=function(){return n},n}function R(){var n=Object(b.a)(["\n  background-color: transparent;\n  color: ",";\n  font-size: 16px;\n  line-height: 130%;\n  padding: 12px 22px;\n  border: 2px solid ",";\n  border-radius: 15px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  &:hover {\n    background-color: ",";\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  }\n  ","\n  ","\n"]);return R=function(){return n},n}var F=s.d.button(R(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.buttonBorder}),(function(n){return n.theme.color.buttonBorder}),(function(n){return n.marginTop&&Object(s.c)(y())}),(function(n){return n.plain&&Object(s.c)(w(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.charade}))})),S=t(49),k=Object(S.b)({name:"user",initialState:{loading:null,user:null,error:!1},reducers:{getUser:function(n){n.loading=!0},setUser:function(n,e){var t=e.payload;n.user=t.userInfo,n.loading=!1},getUserError:function(n){n.error=!0,n.loading=!0},setTestUser:function(n){n.user={uid:"testUser",photoURL:"https://www.practicepte.com/images/clients/avatar_man.jpg",displayName:"\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc"},n.loading=!1},resetUser:function(n){n.user=null,n.error=null,n.loading=null}}}),A=function(n){return function(n){return n.user}(n).user},U=k.actions,z=(U.getUser,U.setUser),C=(U.getUserError,U.setTestUser),I=(U.resetUser,k.reducer);t(85);function D(){var n=Object(b.a)(["\n  margin: 0 auto;\n  max-width: 1220px;\n  @media (max-width: 1220px) {\n    width: calc(100%-32px);\n    margin: 0 16px;\n  } ;\n"]);return D=function(){return n},n}var N=s.d.div(D()),T=function(){var n=l.a.auth(),e=Object(v.a)(n),t=Object(d.a)(e,2);t[0],t[1];return Object(r.jsx)(m,{children:Object(r.jsx)(N,{children:Object(r.jsx)(O,{children:Object(r.jsx)(g,{to:"/room/general",children:"\u30b5\u30a4\u30b3\u30ed\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea"})})})})},E=t(120),L=t(126),B=t(125),J=t(123);function M(){var n=Object(b.a)(["\n  margin-top: 22px;\n  font-size: 22px;\n  line-height: 140%;\n"]);return M=function(){return n},n}function V(){var n=Object(b.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  line-height: 140%;\n"]);return V=function(){return n},n}function Y(){var n=Object(b.a)(["\n  display: grid;\n  margin: 0 auto;\n  margin-top: 20vh;\n  padding: 32px;\n  text-align: center;\n  width: 40%;\n  justify-items: center;\n  background-color: ",";\n  border-radius: 15px;\n  @media (max-width: 1024px) {\n    width: unset;\n    padding: 18px;\n    max-width: 80%;\n  }\n"]);return Y=function(){return n},n}var G=s.d.section(Y(),(function(n){return n.theme.color.white})),H=s.d.h2(V());s.d.p(M());function P(){return Object(r.jsxs)(E.a,{variant:"body2",color:"primary",align:"center",children:["Copyright \xa9 ",Object(r.jsx)(L.a,{color:"inherit",href:"https://twitter.com/diveintohacking",target:"_blank",rel:"noopener",children:"\u306f\u3080\u3055\u3093"})]})}var W=function(n){n.auth;var e=Object(u.b)(),t=Object(o.useState)(""),c=Object(d.a)(t,2),a=(c[0],c[1]),i=Object(o.useState)(!0),s=Object(d.a)(i,2),l=s[0],f=s[1],b=Object(o.useState)(""),j=Object(d.a)(b,2),p=j[0],h=j[1],x=Object(o.useState)(!1),m=Object(d.a)(x,2),O=m[0],g=m[1];return Object(o.useEffect)((function(){f(""===p)}),[p]),Object(r.jsxs)(G,{children:[Object(r.jsx)(H,{children:Object(r.jsx)(E.a,{component:"h1",color:"primary",variant:"h5",children:"\u3088\u3046\u3053\u305d"})}),Object(r.jsx)(J.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0",name:"name",autoFocus:!0,onChange:function(n){return h(n.target.value)},onKeyDown:function(n){O||"Enter"===n.key&&(a(n.target.value),n.preventDefault())},onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)}}),Object(r.jsx)(F,{marginTop:!0,plain:!0,disabled:l,onClick:function(){e(C())},children:"\u306f\u3058\u3081\u308b"}),Object(r.jsx)(B.a,{mt:8,children:Object(r.jsx)(P,{})})]})},_=function(n){var e=n.auth;return Object(u.c)(A)?Object(r.jsx)(f.a,{to:"/room/general"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(T,{}),Object(r.jsx)(W,{auth:e})]})},K=t(56);function X(){var n=Object(b.a)(['\n  text-decoration: none;\n  font-family: "Noto Sans JP", sans-serif;\n  font-size: 18px;\n  line-height: 130%;\n  padding: 10px 16px;\n  border: none;\n  color: ',";\n  background-color: ",";\n  border-radius: 15px;\n"]);return X=function(){return n},n}function q(){var n=Object(b.a)(["\n  display: grid;\n  grid-gap: 6px;\n  margin-top: 16px;\n"]);return q=function(){return n},n}function Z(){var n=Object(b.a)(['\n  font-family: "Noto Sans JP", sans-serif;\n  font-size: 22px;\n  line-height: 130%;\n  margin-top: 16px;\n']);return Z=function(){return n},n}function Q(){var n=Object(b.a)([""]);return Q=function(){return n},n}var $=s.d.div(Q()),nn=s.d.header(Z()),en=s.d.div(q()),tn=Object(s.d)(j.b)(X(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.charade})),rn=function(n,e){return n.members&&n.members.some((function(n){return n===e}))||!n.private?Object(r.jsx)(tn,{to:"/room/".concat(n.ref),children:n.title},"".concat(n.ref)):null},on=t(50),cn=function(n){var e=n.firebase,t=n.worldRef,r=void 0===t?null:t,o=n.roomRef,c=void 0===o?null:o,a=e.firestore().collection("worldId"),i=a.doc(r).collection("messages"),u=Object(on.a)(a),s=Object(d.a)(u,1)[0],l=i.doc(r).collection("chatrooms"),f=l.doc(c).collection("messages"),b=Object(on.a)(l),j=Object(d.a)(b,1)[0],p=f.orderBy("createdAt"),h=Object(on.a)(p),x=Object(d.a)(h,1)[0],m=j?j.find((function(n){return c===n.ref})):null;return{worldIds:s,chatrooms:j,messages:x,currentRoom:m,messagesRef:f,chatroomsRef:l}},an=function(n){var e=n.firebase,t=Object(u.c)(A),c=Object(f.f)().roomRef,a=cn({firebase:e,roomRef:c}),i=a.worldIds,s=a.chatrooms,l=a.chatroomsRef,b=(a.currentRoom,Object(o.useState)("")),j=Object(d.a)(b,2),p=j[0],h=j[1],x=Object(o.useState)(""),m=Object(d.a)(x,2),O=m[0],g=m[1],v=t?t.uid:null;return Object(r.jsxs)($,{children:[Object(r.jsx)("div",{style:{marginTop:50},children:"\xa0"}),Object(r.jsx)("form",{onSubmit:function(n){n.preventDefault();var t=Object(K.a)(),r=[v];try{""!==p.trim()&&(i.doc(t).set({createdAt:e.firestore.FieldValue.serverTimestamp(),title:O,creator:v,ref:t,private:!1,members:r}),g(""))}catch(n){console.log(n)}},children:Object(r.jsx)("input",{placeholder:"WorldId",value:O,style:{lineHeight:2},onChange:function(n){g(n.target.value)}})}),Object(r.jsxs)("form",{onSubmit:function(n){n.preventDefault();var t=Object(K.a)(),r=[v];try{""!==p.trim()&&(l.doc(t).set({createdAt:e.firestore.FieldValue.serverTimestamp(),title:p,creator:v,ref:t,private:!1,members:r}),h(""))}catch(n){console.log(n)}},children:[Object(r.jsx)("input",{placeholder:"\u30c1\u30e3\u30c3\u30c8\u30bf\u30a4\u30c8\u30eb",value:p,style:{lineHeight:2},onChange:function(n){h(n.target.value)}}),Object(r.jsx)("button",{children:"\u65b0\u3057\u3044\u90e8\u5c4b\u3092\u8ffd\u52a0"})]}),Object(r.jsx)(nn,{children:"\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0:"}),Object(r.jsx)(en,{children:s?s.map((function(n){return rn(n,v)})):""})]})},un=t(54),sn=t.n(un),dn=t(65);function ln(){var n=Object(b.a)(["\n  padding: 12px 20px;\n  font-size: 26px;\n  border: #1c1c24 1px solid;\n  border: none;\n  border-top-right-radius: 8px;\n  color: white;\n  &:hover {\n    filter: brightness(1.2);\n  }\n"]);return ln=function(){return n},n}function fn(){var n=Object(b.a)(['\n  font-family: "Roboto", sans-serif;\n  padding: 12px;\n  flex-grow: 1;\n  font-size: 16px;\n  border: #1c1c24 1px solid;\n  border-radius: 0;\n  border-top-left-radius: 8px;\n  &::placeholder {\n  }\n  &:focus {\n    border: #1c1c24 1px solid;\n  }\n']);return fn=function(){return n},n}function bn(){var n=Object(b.a)(["\n  width: calc(1220px - 300px);\n  max-width: 1220px;\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  @media (max-width: 1200px) {\n    width: calc(100% - 332px);\n  }\n"]);return bn=function(){return n},n}function jn(){var n=Object(b.a)(["\n  font-size: 12px;\n  text-align: center;\n  flex-grow: 0;\n  color: #ccc;\n  margin: 0 8px;\n"]);return jn=function(){return n},n}function pn(){var n=Object(b.a)(["\n      border: none;\n      background-color: #4447e2;\n      border-top-left-radius: 10px;\n      border-bottom-right-radius: 0;\n    "]);return pn=function(){return n},n}function hn(){var n=Object(b.a)(["\n  position: relative;\n  font-size: 15px;\n  line-height: 140%;\n  border: #1c1c24 1px solid;\n  padding: 8px 12px;\n  margin: 0 8px;\n  color: white;\n  border-radius: 10px;\n  border-top-left-radius: 0;\n  ","\n"]);return hn=function(){return n},n}function xn(){var n=Object(b.a)(["\n      transform: translateY(20px);\n    "]);return xn=function(){return n},n}function mn(){var n=Object(b.a)(["\n  width: 45px;\n  border-radius: 50%;\n  align-self: flex-start;\n  transform: translateY(-10px);\n  ",";\n"]);return mn=function(){return n},n}function On(){var n=Object(b.a)(["\n  font-size: 13px;\n  position: absolute;\n  min-width: 60px;\n  transform: translateY(-39px) translateX(-5px);\n  color: ",";\n"]);return On=function(){return n},n}function gn(){var n=Object(b.a)(["\n      flex-direction: row-reverse;\n    "]);return gn=function(){return n},n}function vn(){var n=Object(b.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  margin-top: 16px;\n  ","\n"]);return vn=function(){return n},n}function wn(){var n=Object(b.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  margin: 0px;\n  padding: 16px;\n"]);return wn=function(){return n},n}function yn(){var n=Object(b.a)(["\n  max-width: 100%;\n  position: relative;\n"]);return yn=function(){return n},n}function Rn(){var n=Object(b.a)(['\n  font-family: "Noto Sans JP", sans-serif;\n  margin-top: 30px;\n  text-align: center;\n  font-weight: 500;\n  font-size: 26px;\n  line-height: 20px;\n  &:first-letter {\n    text-transform: uppercase;\n  }\n']);return Rn=function(){return n},n}var Fn=s.d.header(Rn()),Sn=s.d.div(yn()),kn=s.d.ul(wn()),An=s.d.li(vn(),(function(n){return n.isAuthor&&Object(s.c)(gn())})),Un=s.d.p(On(),(function(n){return n.theme.color.midGray})),zn=s.d.img(mn(),(function(n){return n.isAuthor&&Object(s.c)(xn())})),Cn=s.d.p(hn(),(function(n){return n.isAuthor&&Object(s.c)(pn())})),In=s.d.div(jn()),Dn=s.d.form(bn()),Nn=s.d.input(fn()),Tn=s.d.button(ln()),En=function(n){return"\u3053\u3093\u306b\u3061\u306f \uff01 \u3053\u308c\u306f\u306e\u59cb\u307e\u308a\u3067\u3059 #".concat(n&&n.title," \u30c1\u30e3\u30cd\u30eb")},Ln=t(66),Bn=t.n(Ln),Jn=(t(90),function(n,e){var t,o,c,a=n.uid===e.uid;return t=n.authorName?n.authorName:null,Object(r.jsxs)(An,{isAuthor:a,children:[Object(r.jsx)(zn,{isAuthor:a,alt:"avatar",src:n.photoURL}),Object(r.jsxs)(Cn,{isAuthor:a,children:[Object(r.jsx)(Un,{children:t}),n.text]}),Object(r.jsx)(Bn.a,{faceColor:"#FF5A00",dotColor:"#FFFFFF",dieSize:30,numDice:1,defaultRoll:(o=1,c=6,o=Math.ceil(o),c=Math.floor(c),Math.floor(Math.random()*(c-o)+o))}),Object(r.jsx)(In,{children:n.createdAt?"".concat(new Date(1e3*n.createdAt.seconds).toLocaleTimeString(),"\n                     ").concat(new Date(1e3*n.createdAt.seconds).toLocaleDateString()):""})]},"".concat(n.id).concat(n.uid))}),Mn=function(n){var e=n.firebase,t=Object(u.c)(A),c=Object(f.f)().roomRef,a=Object(o.useRef)(),i=cn({firebase:e,roomRef:c,dummy:a}),s=(i.worldIds,i.messages),l=i.currentRoom,b=i.messagesRef,j=Object(o.useState)(""),p=Object(d.a)(j,2),h=p[0],x=p[1],m=function(){var n=Object(dn.a)(sn.a.mark((function n(r){var o,c;return sn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),o=t.uid,c=t.photoURL,""===h.trim()){n.next=6;break}return n.next=5,b.add({text:h,createdAt:e.firestore.FieldValue.serverTimestamp(),uid:o,photoURL:c,authorName:t.displayName});case 5:x("");case 6:a.current&&a.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return t&&Object(r.jsxs)(Sn,{children:[Object(r.jsxs)(Fn,{children:["# ",l&&l.title]}),Object(r.jsxs)(kn,{children:[(null===s||void 0===s?void 0:s.length)?s.map((function(n){return Jn(n,t)})):Object(r.jsx)(An,{isAuthor:!1,children:Object(r.jsx)(Cn,{children:En(l)})}),Object(r.jsx)("div",{ref:a})]}),Object(r.jsxs)(Dn,{onSubmit:m,children:[Object(r.jsx)(Nn,{placeholder:"\u3053\u3053\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044",value:h,onChange:function(n){x(n.target.value)}}),Object(r.jsx)(Tn,{children:"\u2b06\ufe0f"})]})]})};function Vn(){var n=Object(b.a)(["\n  display: grid;\n  width: 100%;\n  grid-template-columns: 300px 1fr;\n"]);return Vn=function(){return n},n}var Yn=s.d.div(Vn()),Gn=function(n){var e=n.firebase,t=Object(u.c)(A),o=e.firestore(),c=e.auth(),a=Object(v.a)(c),i=Object(d.a)(a,1)[0];return t?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(N,{children:Object(r.jsxs)(Yn,{children:[Object(r.jsx)(an,{firebase:e,firestore:o,auth:c}),Object(r.jsx)(Mn,{firebase:e,user:i,firestore:o,auth:c})]})})}):Object(r.jsx)(f.a,{to:"/login"})};l.a.initializeApp({apiKey:"AIzaSyC-JTU4A_RcX6WZcNjfuHf0A4F4Y-9l24w",authDomain:"alpaca-dice-chat.firebaseapp.com",databaseURL:"https://alpaca-dice-chat-default-rtdb.firebaseio.com",projectId:"alpaca-dice-chat",storageBucket:"alpaca-dice-chat.appspot.com",messagingSenderId:"956525735606",appId:"1:956525735606:web:c3237851cdc71b9c6fc017"});var Hn=function(){var n=l.a?l.a.auth():null,e=Object(v.a)(n),t=Object(d.a)(e,1)[0],c=Object(u.b)(),a=Object(u.c)(A);return Object(o.useEffect)((function(){if(!a&&t){var n=t.uid,e=t.photoURL,r=t.displayName;c(z({userInfo:{uid:n,photoURL:e,displayName:r}}))}})),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.b,{path:"/",children:Object(r.jsx)(f.a,{to:"/room/general",firebase:l.a})}),Object(r.jsxs)(f.b,{path:"/room/:roomRef",children:[Object(r.jsx)(T,{firebase:l.a}),Object(r.jsx)(Gn,{firebase:l.a})]}),Object(r.jsx)(f.b,{path:"/login",children:Object(r.jsx)(_,{auth:n})})]})};function Pn(){var n=Object(b.a)(["\n    *,*::before,*::after{\n    box-sizing:border-box;\n    }\n    body {\n    margin: 0;\n    color: ",";\n    background-color: ",";\n    font-family: 'Roboto', sans-serif;\n    }\n"]);return Pn=function(){return n},n}var Wn=Object(s.b)(Pn(),(function(n){return n.theme.color.woodsmoke}),(function(n){return n.theme.color.white})),_n={color:{charade:"#2D2D3A",midGray:"#5F5F6E",thunder:"#231F20",shark:"#1C1C24",woodsmoke:"#131419",buttonBorder:"#4447E2",white:"#FFFFFF"}},Kn=t(26),Xn=Object(Kn.c)({user:I}),qn=Object(S.a)({reducer:Xn});i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:qn,children:Object(r.jsxs)(s.a,{theme:_n,children:[Object(r.jsx)(Wn,{}),Object(r.jsx)(j.a,{children:Object(r.jsx)(Hn,{})})]})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.108b3be2.chunk.js.map